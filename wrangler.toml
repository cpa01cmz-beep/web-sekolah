name = "website-sekolah"
main = "worker/index.ts"
compatibility_date = "2025-04-24"
compatibility_flags = ["nodejs_compat"]

[assets]
not_found_handling = "single-page-application"
run_worker_first = ["/api/*", "!/api/docs/*"]

[observability]
enabled = true

[[durable_objects.bindings]]
name = "GlobalDurableObject"
class_name = "GlobalDurableObject"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["GlobalDurableObject"]

# Staging Environment
[env.staging]
name = "website-sekolah-staging"
vars = { ENVIRONMENT = "staging" }
routes = [{ pattern = "staging.your-domain.workers.dev/*", zone_name = "your-domain.workers.dev" }]

[[env.staging.durable_objects.bindings]]
name = "GlobalDurableObject"
class_name = "GlobalDurableObject"

[[env.staging.migrations]]
tag = "v1"
new_sqlite_classes = ["GlobalDurableObject"]

# Production Environment
[env.production]
name = "website-sekolah-production"
vars = { ENVIRONMENT = "production" }
routes = [{ pattern = "your-domain.workers.dev/*", zone_name = "your-domain.workers.dev" }]

[[env.production.durable_objects.bindings]]
name = "GlobalDurableObject"
class_name = "GlobalDurableObject"

[[env.production.migrations]]
tag = "v1"
new_sqlite_classes = ["GlobalDurableObject"]
